<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fashion Blog Post</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    <link rel="stylesheet" href="new.css">
</head>

<body>

    <section id="header">
        <a href="#"><img src="logo.png" class="logo" alt=""></a>

        <div>
            <ul id="navbar">
                <li><a href="home.html">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li><a class="active" href="blog.html">Blog</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="cart.html"><i class="far fa-shopping-bag"></i></a></li>
            </ul>
        </div>
    </section>

    <section id="blog-header">
        <h2>#readmore</h2>
        <p>Read all case studies about our products!</p>
    </section>

    <section id="blog-post" class="section-p1">
        <div class="post-content">
            <div id="post-header">
                <h1 id="post-title"></h1>
                <div class="post-meta">
                    <span id="post-category"></span>
                    <span id="post-date"></span>
                </div>
            </div>
            <div class="post-image">
                <img id="post-img" src="" alt="">
            </div>
            <div id="post-body"></div>
            <div class="post-interactions">
                <div class="likes">
                    <i class="far fa-heart" id="like-btn"></i>
                    <span id="likes-count">0</span> Likes
                </div>
                <div class="comments">
                    <i class="far fa-comment"></i>
                    <span id="comments-count">0</span> Comments
                </div>
            </div>
            <div class="share-buttons">
                <h4>Share this post:</h4>
                <a href="#" class="facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" class="instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" class="pinterest"><i class="fab fa-pinterest-p"></i></a>
            </div>
        </div>
    </section>

    <section id="newsletter" class="section-p1 section-m1">
        <div class="newstext">
            <h4>Sign Up For Newsletters</h4>
            <p>Get E-mail updates about our latest shop and <span>special offers.</span></p>
        </div>
        <div class="form">
            <input type="text" placeholder="Your email address">
            <button class="normal">Sign Up</button>
        </div>
    </section>

    <footer class="section-p1">
        <div class="col">
            <img class="logo" src="logo.png" alt="">
            <h4>Contact</h4>
            <p><strong>Address:</strong> 562 Wellington Road, Street 32, San Francisco</p>
            <p><strong>Phone:</strong> +01 2222 365 /(+91) 01 2345 6789</p>
            <p><strong>Hours:</strong> 10:00 - 18:00, Mon - Sat</p>
        </div>

        <div class="col">
            <h4>About</h4>
            <a href="#">About Us</a>
            <a href="#">Delivery Information</a>
            <a href="#">Privacy Policy</a>
            <a href="#">Terms & Conditions</a>
            <a href="#">Contact Us</a>
        </div>

        <div class="col">
            <h4>My Account</h4>
            <a href="#">Sign In</a>
            <a href="#">View Cart</a>
            <a href="#">My Wishlist</a>
            <a href="#">Track My Order</a>
            <a href="#">Help</a>
        </div>

        <div class="copyright">
            <p>Â© 2024, Fashion Store</p>
        </div>
    </footer>

    <script>
        // Get the post ID from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const postId = urlParams.get('id');

        // Function to fetch and display the blog post
        async function loadBlogPost() {
            try {
                const response = await fetch(`/E-commerce-Clothing--main/E-commerce-Clothing--main/api/blog_api.php?id=${postId}`);
                const data = await response.json();
                
                if (data.status === 'success' && data.data) {
                    const post = data.data;
                    
                    // Update the page with post details
                    document.getElementById('post-title').textContent = post.title;
                    document.getElementById('post-category').textContent = post.category;
                    document.getElementById('post-date').textContent = new Date(post.created_at).toLocaleDateString();
                    document.getElementById('post-img').src = `blog-images/${post.image_url}`;
                    document.getElementById('post-img').alt = post.title;
                    document.getElementById('post-body').innerHTML = post.content;
                    document.getElementById('likes-count').textContent = post.likes;
                    document.getElementById('comments-count').textContent = post.comments;

                    // Set up like button functionality
                    const likeBtn = document.getElementById('like-btn');
                    likeBtn.addEventListener('click', () => handleLike(post.id, likeBtn));
                }
            } catch (error) {
                console.error('Error loading blog post:', error);
            }
        }

        // Function to handle likes
        async function handleLike(postId, heartIcon) {
            try {
                const response = await fetch('/E-commerce-Clothing--main/E-commerce-Clothing--main/api/blog_api.php', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        post_id: postId,
                        likes: true
                    })
                });

                const data = await response.json();
                if (data.status === 'success') {
                    // Update the like count
                    const likesCount = document.getElementById('likes-count');
                    likesCount.textContent = parseInt(likesCount.textContent) + 1;
                    
                    // Toggle heart icon
                    heartIcon.classList.remove('far');
                    heartIcon.classList.add('fas');
                }
            } catch (error) {
                console.error('Error updating like:', error);
            }
        }

        // Load the blog post when the page loads
        document.addEventListener('DOMContentLoaded', loadBlogPost);
    </script>

</body>

</html> 